{% extends 'coach/layout.html' %}
{% block content %}
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-success" role="alert">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}
<h2>Transactions</h2>
<form method="GET">
    {{ form.as_p }}
    <button type="submit">Filter</button>
</form>
<hr>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Category</th>
            <th>Description</th>
            <th>Amount</th>
        </tr>
    </thead>
    <tbody>
        {% for transaction in transactions %}
        <tr class="clickable-row" data-href="{% url 'transactions_details' transaction.id %}">
            <td>{{ transaction.date }}</td>
            <td>{{ transaction.type }}</td>
            <td>{{ transaction.category }}</td>
            <td>{{ transaction.description }}</td>
            <td>{{ transaction.amount }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">No transactions found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{% url 'add_transaction' %}">Add New Transaction</a>
<script>
document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll(".clickable-row").forEach(function(row) {
        row.addEventListener("click", function() {
            window.location = this.dataset.href;
        });
    });
});
</script>

{% endblock %}

