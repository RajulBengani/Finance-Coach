{% extends 'coach/base.html' %}
{% block content %}
<div class="edit-transaction-container">
  <h2 class="title">âž• Add New Transaction</h2>

  <form method="post" class="transaction-form">
    {% csrf_token %}

    <!-- Transaction Type -->
    <div>
      <label for="id_type">Transaction Type:</label>
      <select name="type" id="id_type">
          <option value="income" {% if form.type.value == 'income' %}selected{% endif %}>Income</option>
          <option value="expense" {% if form.type.value == 'expense' %}selected{% endif %}>Expense</option>
          <option value="savings" {% if form.type.value == 'savings' %}selected{% endif %}>Savings</option>
      </select>
    </div>

    <!-- Goal (shown only if type = savings) -->
    <div id="goal-field" style="display:none;">
      {{ form.goal.label_tag }}
      {{ form.goal }}
      {% if form.goal.errors %}
        <div class="error">{{ form.goal.errors }}</div>
      {% endif %}
    </div>

    <!-- Category -->
    <div>
      {{ form.category.label_tag }}
      {{ form.category }}
      {% if form.category.errors %}
        <div class="error">{{ form.category.errors }}</div>
      {% endif %}
    </div>

    <!-- Amount -->
    <div>
      {{ form.amount.label_tag }}
      {{ form.amount }}
      {% if form.amount.errors %}
        <div class="error">{{ form.amount.errors }}</div>
      {% endif %}
    </div>

    <!-- Date -->
    <div>
      {{ form.date.label_tag }}
      {{ form.date }}
      {% if form.date.errors %}
        <div class="error">{{ form.date.errors }}</div>
      {% endif %}
    </div>

    <!-- Description -->
    <div>
      {{ form.description.label_tag }}
      {{ form.description }}
      {% if form.description.errors %}
        <div class="error">{{ form.description.errors }}</div>
      {% endif %}
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-save">ðŸ’¾ Add Transaction</button>
      <a href="{% url 'dashboard' %}" class="btn btn-cancel">ðŸ”™ Dashboard</a>
    </div>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const typeSelect = document.getElementById('id_type');
    const goalField = document.getElementById('goal-field');

    function toggleGoal() {
        if (typeSelect.value === 'savings') {
            goalField.style.display = 'block';
        } else {
            goalField.style.display = 'none';
        }
    }

    typeSelect.addEventListener('change', toggleGoal);

    // Initialize on page load
    toggleGoal();
});
</script>

<style>
/* Reuse the same container & form styles as other pages */
body {
  background : linear-gradient(135deg, #571892 0%, #aa2366 50%, #000000 100%);
  background-attachment: fixed;
  background-size: cover;
}
.edit-transaction-container {
  max-width: 800px;
  margin: 60px auto;
  padding: 25px;
  background: rgba(220, 201, 240, 0.5);
  border-radius: 12px;
  box-shadow:  0 4px 20px rgba(48, 48, 48, 0.984);
  backdrop-filter: blur(10px);
}
.title {
  text-align: center;
  margin-bottom: 25px;
  color: #000000;
}
.transaction-form div {
  margin-bottom: 15px;
}
.transaction-form label {
  color: #000000; /* Change label text color to white */
}
.transaction-form input,
.transaction-form select,
.transaction-form textarea {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #000000;
  border-radius: 6px;
}
.form-actions {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}
.btn {
  padding: 8px 15px;
  border-radius: 6px;
  text-decoration: none;
  border: none;
  cursor: pointer;
  font-weight: bold;
}
.btn-save {
  background: #aa2366; /* Match the pink tone from the gradient */
  color: #ffffff; /* White text for contrast */
  border: 1px solid #8e1d58;
  
}
.btn-cancel {
  background: #571892; /* Match the violet tone from the gradient */
  color: #ffffff; /* White text for contrast */
  border: 1px solid #45126e;
}
.btn-save:hover {
  background: #b72970; /* Slightly brighter pink for hover effect */
  border-color: #630934;
}
.btn-cancel:hover {
  background: #6a1fa3; /* Slightly brighter violet for hover effect */
  border-color: #4d1378;
}
.error {
  color: #920505;
  font-size: 0.9em;
  margin-top: 3px;
}
</style>
{% endblock %}